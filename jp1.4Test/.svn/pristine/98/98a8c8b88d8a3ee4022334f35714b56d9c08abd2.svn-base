<%@ page contentType="text/html;charset=UTF-8" %>
<%@ include file="/webpage/include/taglib.jsp"%>
<html>
<head>
	<title></title>
	<meta name="decorator" content="ani"/>
	<!-- 引入 echarts.js -->
	<%@ include file="/webpage/include/echarts.jsp"%>
<script type="text/javascript">
$(document).ready(function() {
	var data = JSON.parse(localStorage.getItem("faultcategorychartdata"));
	
	$(document).attr("title",data.day+"图表");
	
	initMyChart(data);
  	function initMyChart(data){
  		option = {
  		    tooltip : {
  		        trigger: 'axis',
  		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
  		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
  		        }
  		    },
  		    grid: {
  		        left: '3%',
  		        right: '4%',
  		        bottom: '3%',
  		        containLabel: true
  		    },
  		    xAxis : [
  		        {
  		            type : 'category',
  		            data : data.faultcategoryList/*,
  		            axisLabel: {
  		            interval: 0, 
                    formatter:function(value)  
                    {  
                        return value.split("").join("\n");  
                    }
  		        	}*/
  		        }
  		    ],
  		    yAxis : [
  		        {
  		            type : 'value'
  		        }
  		    ],
  		    series : [{
	            type:'bar',
	            data:data.daydata
	        }]
  		};
		//设置高度
		$("#mychart").css('height',window.screen.height*0.7);

		var myChart = echarts.init(document.getElementById("mychart"));
		myChart.setOption(option);
		
		//点击事件
		myChart.on('click', function (params) {
			var faultcategory = "";
	        if(params.componentType != "xAxis" && params.componentType != "yAxis"){
	            data.faultcategory = params.name;//x轴坐标
		        localStorage.setItem("faultcategorychartdata",JSON.stringify(data));
				jp.windowOpen("${ctx}/faultcategorystatistic/faultcategorystatistic/subTable","",window.screen.width*0.7, window.screen.width*0.4);
	        }
		})
  	}

})
</script>

</head>
<body class="bg-white">
	<div id="mychart" class="col-sm-12"></div>
</body>
</html>